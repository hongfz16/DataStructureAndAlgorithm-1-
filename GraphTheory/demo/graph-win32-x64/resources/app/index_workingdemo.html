<!DOCTYPE html> 
<html> 
	<script> 
		var ffi = require('ffi'); 
		var ref = require('ref');
		var Struct = require('ref-struct');
		var intptr = ref.refType('int');
		var structtest=Struct({
			'inttest':'int',
			'stringtest':ref.types.CString
		});
		var demo = ffi.Library('./native/workingdeme/libdemo', 
			{ 'Add': [ 'double', [ 'double', 'double'] ],
			  'testPtr':[ref.types.void,[intptr,'int']],
			  'teststruct':[ref.types.void,[ref.refType(structtest)]]
			}); 
		window.onload = function() { 
			console.log(demo.Add(12345, 54321)); 
			var handle=ref.alloc('int');
			var structhandle=new structtest();
			structhandle.stringtest=ref.allocCString('hello world');
			demo.testPtr(handle,1000);
			demo.teststruct(structhandle.ref());
			console.log(handle.deref());
			var cstringre=(structhandle.stringtest);
			console.log(cstringre);
		}
	</script>
	<body>
		<h1>hello electron</h1>
	</body>
</html>
